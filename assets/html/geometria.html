<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="favicon.svg" />
    <title>Árboles de Decisión Educativos</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css">
    <style>
        .node circle {
            stroke: #555;
            stroke-width: 1.5px;
        }
        .node text {
            font-size: 14px;
        }
        .link {
            fill: none;
            stroke: #ccc;
            stroke-width: 2px;
        }
        .active-node circle {
            stroke-width: 3px;
            stroke: #000;
        }
        .highlighted-path {
            stroke: #163172;
            stroke-width: 3px;
        }
        #tree-container {
            overflow: auto;
            max-width: 100%;
        }
        .figure-info {
            padding: 20px;
            border-radius: 5px;
            margin-top: 20px;
        }
        .triangle { background-color: #d4f1f9; }
        .quadrilateral { background-color: #ffe5e5; }
        .circle { background-color: #e5ffe5; }
        .polygon { background-color: #f9e5ff; }
        .text-purple { color: #7b2cbf; }
        
        /* Estilos para clasificación de animales */
        .vertebrate { background-color: #d4f1f9; }
        .invertebrate { background-color: #ffe5e5; }
        .mammal { background-color: #e5ffe5; }
        .bird { background-color: #f9e5ff; }
        .fish { background-color: #fff9c4; }
        .reptile { background-color: #ffccbc; }
        .amphibian { background-color: #c8e6c9; }
        .insect { background-color: #bbdefb; }
        .arachnid { background-color: #d1c4e9; }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .nav-tabs .nav-link.active {
            font-weight: bold;
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container">
            <a class="navbar-brand" href="index.html">Matemáticas Interactivas</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">Inicio</a>
                    </li>
                    <li class="nav-item active">
                        <a class="nav-link" href="geometria.html">Árboles de Decisión</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container mt-4">
        <div class="row">
            <div class="col-12">
                <h1 class="text-center mb-4">Árboles de Decisión Educativos</h1>
                <p class="lead text-center">Explora diferentes árboles de decisiones interactivos para clasificar conceptos.</p>
            </div>
        </div>

        <!-- Pestañas de navegación -->
        <ul class="nav nav-tabs" id="decision-tabs" role="tablist">
            <li class="nav-item" role="presentation">
                <a class="nav-link active" id="geometry-tab" data-toggle="tab" href="#geometry-content" role="tab">
                    Figuras Geométricas
                </a>
            </li>
            <li class="nav-item" role="presentation">
                <a class="nav-link" id="animals-tab" data-toggle="tab" href="#animals-content" role="tab">
                    Clasificación de Animales
                </a>
            </li>
        </ul>

        <!-- Contenido de las pestañas -->
        <div class="tab-content" id="decision-tabs-content">
            <!-- Contenido de Geometría -->
            <div class="tab-pane fade show active" id="geometry-content">
                <div class="row mb-4">
                    <div class="col-lg-10 mx-auto">
                        <div class="card mb-4">
                            <div class="card-header bg-primary text-white">
                                <h5 class="mb-0">¿Cómo jugar? - Figuras Geométricas</h5>
                            </div>
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-6">
                                        <h6 class="text-primary">Objetivo del juego</h6>
                                        <p>Identificar correctamente una figura geométrica respondiendo preguntas sobre sus características.</p>
                                        
                                        <h6 class="text-primary mt-3">Dos formas de jugar</h6>
                                        <ul>
                                            <li><strong>Modo visual</strong>: Haz clic directamente en los nodos del árbol que describen la figura.</li>
                                            <li><strong>Modo guiado</strong>: Utiliza los botones en el panel de preguntas para seleccionar tus respuestas paso a paso.</li>
                                        </ul>
                                        
                                        <h6 class="text-primary mt-3">Pasos básicos</h6>
                                        <ol>
                                            <li>Comienza en "¿Qué figura quieres clasificar?"</li>
                                            <li>Elige entre figuras con "lados rectos" o "lados curvos"</li>
                                            <li>Responde a cada pregunta según las características de tu figura</li>
                                            <li>Al final, verás la figura identificada y sus propiedades</li>
                                        </ol>
                                    </div>
                                    <div class="col-md-6">
                                        <h6 class="text-primary">Figuras que puedes identificar</h6>
                                        <ul>
                                            <li><strong class="text-info">Triángulos</strong>: Equilátero, Isósceles, Escaleno, Rectángulo</li>
                                            <li><strong class="text-danger">Cuadriláteros</strong>: Cuadrado, Rectángulo, Rombo, Paralelogramo, Trapecio</li>
                                            <li><strong class="text-purple">Polígonos</strong>: Pentágono, Hexágono y otros polígonos regulares e irregulares</li>
                                            <li><strong class="text-success">Figuras curvas</strong>: Círculo, Elipse</li>
                                        </ul>
                                        
                                        <h6 class="text-primary mt-3">Controles adicionales</h6>
                                        <ul>
                                            <li><strong>Reiniciar Árbol</strong>: Comienza desde cero</li>
                                            <li><strong>Expandir Todo</strong>: Muestra todas las opciones posibles</li>
                                            <li><strong>Colapsar Todo</strong>: Simplifica la vista del árbol</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row mb-4">
                    <div class="col-md-12 text-center">
                        <button id="reset-tree-btn" class="btn btn-secondary">Reiniciar Árbol</button>
                        <button id="expand-all-btn" class="btn btn-info ml-2">Expandir Todo</button>
                        <button id="collapse-all-btn" class="btn btn-warning ml-2">Colapsar Todo</button>
                        <button id="start-simulation-btn" class="btn btn-success ml-2">Iniciar Simulación Guiada</button>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-8">
                        <div id="tree-container">
                            <svg id="geometry-tree"></svg>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div id="simulation-panel" class="card d-none">
                            <div class="card-header bg-success text-white">
                                <h5 class="mb-0">Simulación Paso a Paso</h5>
                            </div>
                            <div class="card-body">
                                <div id="simulation-step" class="mb-3">
                                    <h6 class="mb-2">Paso 1: Selecciona el tipo de figura</h6>
                                    <p>¿La figura que deseas clasificar tiene lados rectos o curvos?</p>
                                    <div class="text-center">
                                        <button id="sim-straight-btn" class="btn btn-outline-primary m-1">Tiene lados rectos</button>
                                        <button id="sim-curved-btn" class="btn btn-outline-primary m-1">Tiene lados curvos</button>
                                    </div>
                                </div>
                                <div id="simulation-progress" class="mt-4">
                                    <div class="progress">
                                        <div class="progress-bar bg-success" role="progressbar" style="width: 10%" aria-valuenow="10" aria-valuemin="0" aria-valuemax="100">10%</div>
                                    </div>
                                </div>
                            </div>
                            <div class="card-footer">
                                <button id="sim-reset-btn" class="btn btn-secondary">Reiniciar Simulación</button>
                            </div>
                        </div>

                        <div id="question-panel" class="card">
                            <div class="card-header bg-primary text-white">
                                <h5 class="mb-0">Pregunta actual</h5>
                            </div>
                            <div class="card-body">
                                <p id="current-question" class="lead">Selecciona una opción en el árbol para comenzar...</p>
                                <div id="answer-buttons" class="text-center">
                                    <!-- Los botones se generarán dinámicamente aquí -->
                                </div>
                                <div id="input-container" class="form-group mt-3 d-none">
                                    <label for="numeric-input">Número de lados:</label>
                                    <input type="number" id="numeric-input" class="form-control" min="3" max="20">
                                    <button id="submit-input" class="btn btn-primary mt-2">Enviar</button>
                                </div>
                            </div>
                        </div>

                        <div id="result-panel" class="card d-none">
                            <div class="card-header bg-success text-white">
                                <h5 class="mb-0">Resultado</h5>
                            </div>
                            <div class="card-body">
                                <div id="result-content">
                                    <!-- El resultado se mostrará aquí -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Contenido de Clasificación de Animales -->
            <div class="tab-pane fade" id="animals-content">
                <div class="row mb-4">
                    <div class="col-lg-10 mx-auto">
                        <div class="card mb-4">
                            <div class="card-header bg-success text-white">
                                <h5 class="mb-0">¿Cómo jugar? - Clasificación de Animales</h5>
                            </div>
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-6">
                                        <h6 class="text-success">Objetivo del juego</h6>
                                        <p>Identificar correctamente el grupo taxonómico de un animal respondiendo preguntas sobre sus características.</p>
                                        
                                        <h6 class="text-success mt-3">Formas de jugar</h6>
                                        <ul>
                                            <li><strong>Modo paso a paso</strong>: Responde las preguntas secuencialmente para clasificar el animal.</li>
                                            <li><strong>Modo automático</strong>: Proporciona un conjunto de respuestas predefinidas para una clasificación rápida.</li>
                                        </ul>
                                        
                                        <h6 class="text-success mt-3">Pasos básicos</h6>
                                        <ol>
                                            <li>Comienza con "¿Es un vertebrado?"</li>
                                            <li>Responde a cada pregunta según las características del animal</li>
                                            <li>Continúa hasta llegar a una clasificación final</li>
                                            <li>Observa el resultado con la descripción del grupo taxonómico</li>
                                        </ol>
                                    </div>
                                    <div class="col-md-6">
                                        <h6 class="text-success">Grupos taxonómicos que puedes identificar</h6>
                                        <ul>
                                            <li><strong class="text-primary">Vertebrados</strong>: Mamíferos, Aves, Reptiles, Anfibios, Peces</li>
                                            <li><strong class="text-danger">Invertebrados</strong>: Insectos, Arácnidos, Crustáceos, Moluscos, Gusanos</li>
                                        </ul>
                                        
                                        <h6 class="text-success mt-3">Controles adicionales</h6>
                                        <ul>
                                            <li><strong>Reiniciar Árbol</strong>: Comienza una nueva clasificación desde cero</li>
                                            <li><strong>Mostrar Árbol Completo</strong>: Visualiza el árbol de decisiones completo</li>
                                            <li><strong>Modo Automático</strong>: Proporciona respuestas predefinidas para clasificar rápidamente</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row mb-4">
                    <div class="col-md-12 text-center">
                        <button id="animals-reset-btn" class="btn btn-secondary">Reiniciar Clasificación</button>
                        <button id="animals-show-tree-btn" class="btn btn-info ml-2">Mostrar Árbol Completo</button>
                        <button id="animals-auto-mode-btn" class="btn btn-success ml-2">Modo Automático</button>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-8">
                        <div class="card">
                            <div class="card-header bg-success text-white">
                                <h5 class="mb-0">Clasificación de Animales</h5>
                            </div>
                            <div class="card-body">
                                <div id="animals-tree-container" class="d-none">
                                    <!-- Aquí se mostrará el árbol cuando se solicite -->
                                    <div class="alert alert-info">
                                        Haz clic en "Mostrar Árbol Completo" para visualizar el árbol de decisión completo.
                                    </div>
                                </div>
                                
                                <div id="animals-interaction">
                                    <div class="card">
                                        <div class="card-header bg-primary text-white">
                                            <h5 id="animal-question" class="mb-0">¿Es un vertebrado?</h5>
                                        </div>
                                        <div class="card-body">
                                            <div id="animal-options" class="text-center">
                                                <button class="btn btn-outline-primary m-2 animal-option" data-answer="Sí">Sí</button>
                                                <button class="btn btn-outline-primary m-2 animal-option" data-answer="No">No</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div id="animals-auto-panel" class="card mb-4">
                            <div class="card-header bg-info text-white">
                                <h5 class="mb-0">Modo Automático</h5>
                            </div>
                            <div class="card-body">
                                <p>Selecciona un animal para clasificarlo automáticamente:</p>
                                <div class="form-group">
                                    <select id="predefined-animals" class="form-control">
                                        <option value="">-- Selecciona un animal --</option>
                                        <option value="pez">Pez (ej. Trucha)</option>
                                        <option value="anfibio">Anfibio (ej. Rana)</option>
                                        <option value="reptil">Reptil (ej. Lagarto)</option>
                                        <option value="ave">Ave (ej. Águila)</option>
                                        <option value="mamifero">Mamífero (ej. Perro)</option>
                                        <option value="insecto">Insecto (ej. Abeja)</option>
                                        <option value="aracnido">Arácnido (ej. Araña)</option>
                                        <option value="crustaceo">Crustáceo (ej. Cangrejo)</option>
                                        <option value="molusco">Molusco (ej. Pulpo)</option>
                                        <option value="gusano">Gusano (ej. Lombriz)</option>
                                    </select>
                                </div>
                                <button id="classify-animal-btn" class="btn btn-primary">Clasificar</button>
                            </div>
                        </div>

                        <div id="animals-result-panel" class="card d-none">
                            <div class="card-header bg-success text-white">
                                <h5 class="mb-0">Resultado de la Clasificación</h5>
                            </div>
                            <div class="card-body">
                                <div id="animals-result-content">
                                    <!-- El resultado de la clasificación se mostrará aquí -->
                                </div>
                                <div id="animals-path" class="mt-3 small">
                                    <!-- El camino recorrido se mostrará aquí -->
                                </div>
                                <button id="animals-new-classification-btn" class="btn btn-primary mt-3">Nueva Clasificación</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer Container -->
    <div id="footer-container"></div>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <!-- Cargar primero el script base para la clase DecisionTree -->
    <script src="decisionTree.js"></script>
    <!-- Cargar después los scripts que dependen de DecisionTree -->
    <script>
        // Verificar la carga correcta de scripts
        document.addEventListener('DOMContentLoaded', function() {
            console.log("Carga de scripts en geometria.html:");
            if (typeof DecisionTree === 'undefined') {
                console.error("Error: DecisionTree no se ha cargado correctamente");
                alert("Error al cargar scripts necesarios. Por favor, recarga la página.");
            } else {
                console.log("DecisionTree cargado correctamente");
            }
        });
    </script>
    <script src="geometria.js"></script>
    <script src="footer.js"></script>

    <script>
        // Controlador de pestañas
        $(document).ready(function() {
            // Usar la API de Bootstrap para las pestañas
            $('#decision-tabs a').on('click', function (e) {
                e.preventDefault();
                $(this).tab('show');
            });
            
            // Evento que se dispara cuando una pestaña se muestra completamente
            $('#decision-tabs a').on('shown.bs.tab', function (e) {
                // Cargar el script de clasificación de animales solo cuando se activa esa pestaña
                if ($(e.target).attr('id') === 'animals-tab') {
                    console.log('Pestaña de clasificación de animales activada');
                    
                    // Cargar el script de clasificación de animales dinámicamente si no está cargado
                    if (typeof loadAnimalClassification === 'undefined') {
                        const script = document.createElement('script');
                        script.src = 'animalsClassification.js';
                        script.onload = function() {
                            console.log('Script de clasificación de animales cargado correctamente');
                        };
                        document.body.appendChild(script);
                    }
                }
            });
        });
    </script>
</body>
</html> 